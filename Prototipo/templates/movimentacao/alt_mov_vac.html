{% extends 'base.html' %}

{% block content %}
  <h2>{% block title %}Cadastro de movimentações - "{{ reg_mov['mov_id'] }}" {% endblock %}</h2>
  <p>
    <form method="POST">
      <div class="form-group">
        <label for="form_lote">Código do movimento</label>
        <input readonly type="number" name="form_id"
             placeholder="Código do movimento" class="form-control"
             value="{{ request.form['form_id'] or reg_mov['mov_id']}}"></input>
      </div>
      <div class="form-group">
        <label for="form_vacina">Vacina(*)</label>
        <input type="number" name="form_vacina" class="form-control"
           value="{{ request.form['form_vacina'] or reg_mov['mov_vacina'] }}"></input>
      </div>
      <div class="form-group">
        <label for="form_requisicao">Requisicao</label>
        <input type="number" name="form_requisicao" class="form-control"
           value="{{ request.form['form_requisicao'] or reg_mov['mov_requisicao'] }}"></input>
      </div>
      <div class="form-group">
        UBS de origem
        <select name="form_ubs_orig">
           {% for lista in lista_ubs %}
              {% if (lista['ubs_id'] == reg_mov['mov_UBS_orig']) %}
                <option value="{{ lista['ubs_id']}}" selected>{{ lista['ubs_nome']}}</option>
              {% else %}
                <option value="{{ lista['ubs_id']}}">{{ lista['ubs_nome']}}</option>
              {% endif %}
           {% endfor %}
        </select>
        </div>
        <div class="form-group">
          UBS de destino
          <select name="form_ubs_dest">
             {% for lista in lista_ubs %}
                {% if (lista['ubs_id'] == reg_mov['mov_UBS_dest']) %}
                  <option value="{{ lista['ubs_id']}}" selected>{{ lista['ubs_nome']}}</option>
                {% else %}
                  <option value="{{ lista['ubs_id']}}">{{ lista['ubs_nome']}}</option>
                {% endif %}
             {% endfor %}
          </select>
          </div>
        <div class="form-group">
        <label for="form_motivo">Motivo</label>
        <input type="Text" name="form_motivo"
           placeholder="Motivo" class="form-control"
           value="{{ request.form['form_motivo'] or reg_mov['mov_motivo'] }}"></input>
      </div>
      <div class="form-group">
         <label for="form_qtde">Quantidade</label>
         <input type="number" name="form_qtde"
            placeholder="Quantidade" class="form-control"
            value="{{ request.form['form_qtde'] or '%0.2f'|format(reg_mov['mov_qtde']|float)}}"></input>
      </div>
      <div class="form-group">
        <label for="form_dt_mov">Data da movimentação</label>
        <input readonly type="date" name="form_dt_mov"
             placeholder="Data da movimentação" class="form-control"
           value="{{ request.form['form_dt_mov'] or reg_mov['mov_dt_mov'] }}"></input>
      </div>
      <div class="form-group">
        <button type="submit" class="btn btn-primary">Alterar</button>
      </div>
    </form>  
    <form action="{{ url_for('del_mov', id=reg_mov['mov_id']) }}" method="POST">
        <input type="submit" value="Excluir"
              class="btn btn-danger"
              onclick="return confirm('Você tem certeza que quer apagar ?')">
    </form>
</p>
{% endblock %}